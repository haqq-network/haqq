(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{710:function(e,t,a){"use strict";a.r(t);var o=a(1),i=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"concepts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#concepts"}},[e._v("#")]),e._v(" Concepts")]),e._v(" "),a("h2",{attrs:{id:"eip-1559-fee-market"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eip-1559-fee-market"}},[e._v("#")]),e._v(" EIP-1559: Fee Market")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1559.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("EIP-1559"),a("OutboundLink")],1),e._v(" describes a pricing mechanism that was proposed on Ethereum to improve to calculation of transaction fees. It includes a fixed-per-block network fee that is burned and dynamically expands/contracts block sizes to deal with peaks of network congestion.")]),e._v(" "),a("p",[e._v("Before EIP-1559 the transaction fee is calculated with")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"ZmVlID0gZ2FzUHJpY2UgKiBnYXNMaW1pdAo="}}),e._v(" "),a("p",[e._v("where "),a("code",[e._v("gasPrice")]),e._v(" is the price per gas and "),a("code",[e._v("gasLimit")]),e._v(" describes the amount of gas required to perform the transaction.\nThe more complex operations a transaction requires, the higher the gasLimit (See "),a("a",{attrs:{href:"https://docs.evmos.org/modules/evm/01_concepts.html#executing-evm-bytecode",target:"_blank",rel:"noopener noreferrer"}},[e._v("Executing EVM bytecode"),a("OutboundLink")],1),e._v(").\nTo submit a transaction, the signer needs to specify the "),a("code",[e._v("gasPrice")]),e._v(".")]),e._v(" "),a("p",[e._v("With EIP-1559 enabled, the transaction fee is calculated with")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"ZmVlID0gKGJhc2VGZWUgKyBwcmlvcml0eVRpcCkgKiBnYXNMaW1pdAo="}}),e._v(" "),a("p",[e._v("where "),a("code",[e._v("baseFee")]),e._v(" is the fixed-per-block network fee per gas and "),a("code",[e._v("priorityTip")]),e._v(" is an additional fee per gas that can be set optionally.\nNote, that both the base fee and the priority tip are gas prices.\nTo submit a transaction with EIP-1559, the signer needs to specify the "),a("code",[e._v("gasFeeCap")]),e._v(", which is the maximum fee per gas they are willing to pay in total.\nOptionally, the "),a("code",[e._v("priorityTip")]),e._v(" can be specified, which covers both the priority fee and the block's network fee per gas (aka: base fee).")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[e._v("The Cosmos SDK uses a different terminology for "),a("code",[e._v("gas")]),e._v(" than Ethereum.\nWhat is called "),a("code",[e._v("gasLimit")]),e._v(" on Ethereum is called "),a("code",[e._v("gasWanted")]),e._v(" on Cosmos.\nYou might encounter both terminologies on Evmos since it builds Ethereum on top of the SDK,\ne.g. when using different wallets like Keplr for Cosmos and Metamask for Ethereum.")])]),e._v(" "),a("h2",{attrs:{id:"base-fee"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#base-fee"}},[e._v("#")]),e._v(" Base Fee")]),e._v(" "),a("p",[e._v("The base fee per gas (aka base fee) is a global gas price defined at the consensus level. It is stored as a module parameter and is adjusted at the end of each block based on the total gas used in the previous block and gas target ("),a("code",[e._v("block gas limit / elasticity multiplier")]),e._v("):")]),e._v(" "),a("ul",[a("li",[e._v("it increases when blocks are above the gas target,")]),e._v(" "),a("li",[e._v("it decreases when blocks are below the gas target.")])]),e._v(" "),a("p",[e._v("Instead of burning the base fee (as implemented on Ethereum), the "),a("code",[e._v("feemarket")]),e._v(" module allocates the base fee for regular "),a("a",{attrs:{href:"https://docs.evmos.org/modules/distribution/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Cosmos SDK fee distribution"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"priority-tip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#priority-tip"}},[e._v("#")]),e._v(" Priority Tip")]),e._v(" "),a("p",[e._v("In EIP-1559, the "),a("code",[e._v("max_priority_fee_per_gas")]),e._v(", often referred to as "),a("code",[e._v("tip")]),e._v(",\nis an additional gas price that can be added to the "),a("code",[e._v("baseFee")]),e._v(" in order to incentivize transaction prioritization.\nThe higher the tip, the more likely the transaction is included in the block.")]),e._v(" "),a("p",[e._v("Until the Cosmos SDK version v0.46, however, there is no notion of transaction prioritization.\nThus, the tip for an EIP-1559 transaction on Ethermint should be zero ("),a("code",[e._v("MaxPriorityFeePerGas")]),e._v(" JSON-RPC endpoint returns "),a("code",[e._v("0")]),e._v(").\nHave a look at the "),a("a",{attrs:{href:"https://docs.evmos.org/validators/setup/mempool.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("mempool"),a("OutboundLink")],1),e._v(" docs to read more about how to leverage transaction prioritization.")]),e._v(" "),a("h2",{attrs:{id:"effective-gas-price"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#effective-gas-price"}},[e._v("#")]),e._v(" Effective Gas price")]),e._v(" "),a("p",[e._v("For EIP-1559 transactions (dynamic fee transactions) the effective gas price describes the maximum gas price that a transaction is willing to provide. It is derived from the transaction arguments and the base fee parameter. Depending on which one is smaller, the effective gas price is either the "),a("code",[e._v("baseFee + tip")]),e._v(" or the "),a("code",[e._v("gasFeeCap")])]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"bWluKGJhc2VGZWUgKyBnYXNUaXBDYXAsIGdhc0ZlZUNhcCkK"}}),e._v(" "),a("h2",{attrs:{id:"local-vs-global-minimum-gas-prices"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#local-vs-global-minimum-gas-prices"}},[e._v("#")]),e._v(" Local vs. Global Minimum Gas Prices")]),e._v(" "),a("p",[e._v("Minimum gas prices are used to discard spam transactions in the network, by raising the cost of transactions to the point that it is not economically viable for the spammer. This is achieved by defining a minimum gas price for accepting txs in the mempool for both Cosmos and EVM transactions. A transaction is discarded from the mempool if it doesn't provide at least one of the two types of min gas prices:")]),e._v(" "),a("ol",[a("li",[e._v("the local min gas prices that validators can set on their node config and")]),e._v(" "),a("li",[e._v("the global min gas price, which is set as a parameter in the "),a("code",[e._v("feemarket")]),e._v(" module, which can be changed through governance.")])]),e._v(" "),a("p",[e._v("The lower bound for a transaction gas price is determined by comparing of gas price bounds according to three cases:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("If the effective gas price ("),a("code",[e._v("effective gas price = base fee + priority tip")]),e._v(") or the local minimum gas price is lower than the global "),a("code",[e._v("MinGasPrice")]),e._v(" ("),a("code",[e._v("min-gas-price (local) < MinGasPrice (global) OR EffectiveGasPrice < MinGasPrice")]),e._v("), then "),a("code",[e._v("MinGasPrice")]),e._v(" is used as a lower bound.")])]),e._v(" "),a("li",[a("p",[e._v("If transactions are rejected due to having a gas price lower than "),a("code",[e._v("MinGasPrice")]),e._v(", users need to resend the transactions with a gas price higher or equal to "),a("code",[e._v("MinGasPrice")]),e._v(".")])]),e._v(" "),a("li",[a("p",[e._v("If the effective gas price or the local "),a("code",[e._v("minimum-gas-price")]),e._v(" is higher than the global "),a("code",[e._v("MinGasPrice")]),e._v(", then the larger value of the two is used as a lower bound. In the case of EIP-1559, users must increase the priority fee for their transactions to be valid.")])])]),e._v(" "),a("p",[e._v("The comparison of transaction gas price and the lower bound is implemented through AnteHandler decorators. For EVM transactions, this is done in the "),a("code",[e._v("EthMempoolFeeDecorator")]),e._v(" and "),a("code",[e._v("EthMinGasPriceDecorator")]),e._v(" "),a("code",[e._v("AnteHandler")]),e._v(" and for Cosmos transactions in "),a("code",[e._v("NewMempoolFeeDecorator")]),e._v(" and "),a("code",[e._v("MinGasPriceDecorator")]),e._v(" "),a("code",[e._v("AnteHandler")]),e._v(".")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[e._v("If the base fee decreases to a value below the global "),a("code",[e._v("MinGasPrice")]),e._v(", it is set to the "),a("code",[e._v("MinGasPrice")]),e._v(". This is implemented, so that the base fee can't drop to gas prices that wouldn't allow transactions to be accepted in the mempool, because of a higher "),a("code",[e._v("MinGasPrice")]),e._v(".")])])],1)}),[],!1,null,null,null);t.default=i.exports}}]);