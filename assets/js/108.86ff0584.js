(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{663:function(t,e,a){"use strict";a.r(e);var o=a(1),s=Object(o.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"security-best-practices"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#security-best-practices"}},[t._v("#")]),t._v(" Security Best Practices")]),t._v(" "),a("p",{attrs:{synopsis:""}},[t._v("This article is about a few points of node basic and additional security configurations")]),t._v(" "),a("h2",{attrs:{id:"create-a-non-root-user-with-sudo-privileges"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-non-root-user-with-sudo-privileges"}},[t._v("#")]),t._v(" Create a non-root user with "),a("code",[t._v("sudo")]),t._v(" privileges")]),t._v(" "),a("p",[t._v("It is a good idea to log in as a non-root user. Logins with root permissions are often overlooked as a security risk, but this is not the case! The command "),a("code",[t._v("rm")]),t._v(" can wipe your entire server if run incorrectly by a root user. By logging in as a non-root user, you can avoid this issue.")]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",[t._v("Do NOT routinely use the root account. Please use "),a("code",[t._v("su")]),t._v(" instead.")])]),t._v(" "),a("p",[t._v("Connect via SSH to your node")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c3NoIHVzZXJuYW1lQHNlcnZlci5wdWJsaWMuaXAuYWRkcmVzcwojIGV4YW1wbGUKIyBzc2ggdWJ1bnR1QDE3LjIzLjE2MS4xMQo="}}),t._v(" "),a("p",[t._v("Create a new user called haqq_node, for example")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyB1c2VyYWRkIC1tIC1zIC9iaW4vYmFzaCBoYXFxX25vZGUK"}}),t._v(" "),a("p",[t._v("Set the password for haqq_node user")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBwYXNzd2QgaGFxcV9ub2RlCg=="}}),t._v(" "),a("p",[t._v("Add haqq_node to the sudo group")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyB1c2VybW9kIC1hRyBzdWRvIGhhcXFfbm9kZQo="}}),t._v(" "),a("h2",{attrs:{id:"use-ssh-keys-only-connection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-ssh-keys-only-connection"}},[t._v("#")]),t._v(" Use SSH Keys only connection")]),t._v(" "),a("p",[t._v("The basic rules of hardening SSH are:")]),t._v(" "),a("ul",[a("li",[t._v("Don't use password for SSH access (use private key)")]),t._v(" "),a("li",[t._v("Don't allow root to SSH (the appropriate users should SSH in, then "),a("code",[t._v("su")]),t._v(" or "),a("code",[t._v("sudo")]),t._v(")")]),t._v(" "),a("li",[t._v("Use "),a("code",[t._v("sudo")]),t._v(" for users so commands are logged")]),t._v(" "),a("li",[t._v("Log unauthorized login attempts (and consider software to block/ban users who try to access your server too many times, for example fail2ban)")]),t._v(" "),a("li",[t._v("Lock down SSH to only the ip range your require (optional)")])]),t._v(" "),a("p",[t._v("You will need to create a key pair on your local machine, with the public key stored in the "),a("code",[t._v("keyname")]),t._v(" file.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3NoLWtleWdlbiAtdCBlZDI1NTE5Cg=="}}),t._v(" "),a("p",[t._v("Transfer the public key "),a("code",[t._v("keyname.pub")]),t._v(" to your remote node.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c3NoLWNvcHktaWQgLWkgJEhPTUUvLnNzaC9rZXluYW1lLnB1YiBoYXFxX25vZGVAc2VydmVyLnB1YmxpYy5pcC5hZGRyZXNzCg=="}}),t._v(" "),a("p",[t._v("Login with your new haqq_node user")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3NoIGhhcXFfbm9kZUBzZXJ2ZXIucHVibGljLmlwLmFkZHJlc3MK"}}),t._v(" "),a("p",[t._v("Disable root login and password based login. Edit the "),a("code",[t._v("/etc/ssh/sshd_config file")]),t._v(" using any text editor, for example "),a("code",[t._v("nano")])]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBuYW5vIC9ldGMvc3NoL3NzaGRfY29uZmlnCg=="}}),t._v(" "),a("p",[t._v("Locate attributtes in "),a("code",[t._v("sshd_config")]),t._v(":")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("ChallengeResponseAuthentication")])]),t._v(" "),a("li",[a("code",[t._v("PasswordAuthentication")])]),t._v(" "),a("li",[a("code",[t._v("PermitEmptyPasswords")])])]),t._v(" "),a("p",[t._v("And modify their with "),a("code",[t._v("no")]),t._v(" parameter")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"Q2hhbGxlbmdlUmVzcG9uc2VBdXRoZW50aWNhdGlvbiBubwoKUGFzc3dvcmRBdXRoZW50aWNhdGlvbiBubwoKUGVybWl0RW1wdHlQYXNzd29yZHMgbm8K"}}),t._v(" "),a("p",[t._v("And also find "),a("code",[t._v("PermitRootLogin")]),t._v(" attributte. Edit it with "),a("code",[t._v("prohibit-password")]),t._v(" parameter")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"UGVybWl0Um9vdExvZ2luIHByb2hpYml0LXBhc3N3b3JkCg=="}}),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[a("strong",[t._v("Optional")]),t._v(": You can also customize SSH "),a("strong",[t._v("Port")]),t._v(" with your "),a("strong",[t._v("custom")]),t._v(" numeric value.")]),t._v(" "),a("p",[t._v("Please "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers",target:"_blank",rel:"noopener noreferrer"}},[t._v("check for possible conflicts"),a("OutboundLink")],1),t._v(" first")])]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"UG9ydCAmbHQ7cG9ydCBudW1iZXImZ3Q7Cg=="}}),t._v(" "),a("p",[t._v("Then validate the syntax of your new SSH configuration using this command")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBzc2hkIC10Cg=="}}),t._v(" "),a("p",[t._v("If no errors with the syntax validation, restart the SSH process")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"c3VkbyBzeXN0ZW1jdGwgcmVzdGFydCBzc2hkCg=="}}),t._v(" "),a("p",[t._v("Verify that the ssh login still works")]),t._v(" "),a("p",[t._v("Standard SSH Port is "),a("code",[t._v("22")])]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"c3NoIGhhcXFfbm9kZUBzZXJ2ZXIucHVibGljLmlwLmFkZHJlc3MK"}}),t._v(" "),a("p",[t._v("Alternatively, you might need to add the "),a("code",[t._v("-p <port#>")]),t._v(" flag if you used a custom SSH port.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c3NoIGhhcXFfbm9kZUBzZXJ2ZXIucHVibGljLmlwLmFkZHJlc3MgLXAgJmx0O2N1c3RvbSBwb3J0IG51bWJlciZndDsK"}}),t._v(" "),a("p",[t._v("Connection command")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c3NoIC1pICZsdDtwYXRoIHRvIHlvdXIgU1NIX2tleV9uYW1lLnB1YiZndDsgaGFxcV9ub2RlQHNlcnZlci5wdWJsaWMuaXAuYWRkcmVzcwo="}}),t._v(" "),a("p",[a("strong",[t._v("Optional")]),t._v(": Make logging in easier by updating your local ssh config.")]),t._v(" "),a("p",[t._v("You can also simplify the ssh command needed to log in to your server, consider updating your local "),a("code",[t._v("$HOME/.ssh/config")]),t._v(" file:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"SG9zdCB1YnVudHUKICBVc2VyIGhhcXFfbm9kZQogIEhvc3ROYW1lICZsdDtzZXJ2ZXIucHVibGljLmlwLmFkZHJlc3MmZ3Q7CiAgUG9ydCAmbHQ7Y3VzdG9tIHBvcnQgbnVtYmVyJmd0Owo="}}),t._v(" "),a("p",[t._v("This will allow you to log in with "),a("code",[t._v("ssh haqq_node")]),t._v(" rather than needing to pass through all ssh parameters explicitly.")]),t._v(" "),a("h2",{attrs:{id:"update-your-system"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-your-system"}},[t._v("#")]),t._v(" Update your system")]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",[t._v("It's critically important to keep your system up-to-date with the latest patches to prevent intruders from accessing your system.")])]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c3VkbyBhcHQtZ2V0IHVwZGF0ZSAteSAmYW1wOyZhbXA7IFwKc3VkbyBhcHQgZGlzdC11cGdyYWRlIC15ICZhbXA7JmFtcDsgXApzdWRvIGFwdC1nZXQgYXV0b3JlbW92ZSAmYW1wOyZhbXA7IFwKc3VkbyBhcHQtZ2V0IGF1dG9jbGVhbgo="}}),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("Enable automatic updates so you don't have to manually install them.")])]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"c3VkbyBhcHQtZ2V0IGluc3RhbGwgdW5hdHRlbmRlZC11cGdyYWRlcwpzdWRvIGRwa2ctcmVjb25maWd1cmUgLXBsb3cgdW5hdHRlbmRlZC11cGdyYWRlcwo="}}),t._v(" "),a("h2",{attrs:{id:"disable-root-account"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#disable-root-account"}},[t._v("#")]),t._v(" Disable root account")]),t._v(" "),a("p",[t._v("Use sudo execute to run commands as low-level users without requiring their own privileges.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"IyBUbyBkaXNhYmxlIHRoZSByb290IGFjY291bnQsIHNpbXBseSB1c2UgdGhlIC1sIG9wdGlvbi4Kc3VkbyBwYXNzd2QgLWwgcm9vdAo="}}),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"IyBJZiBmb3Igc29tZSB2YWxpZCByZWFzb24geW91IG5lZWQgdG8gcmUtZW5hYmxlIHRoZSBhY2NvdW50LCBzaW1wbHkgdXNlIHRoZSAtdSBvcHRpb24uCnN1ZG8gcGFzc3dkIC11IHJvb3QK"}}),t._v(" "),a("h2",{attrs:{id:"setup-two-factor-authentication-for-ssh-optional"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setup-two-factor-authentication-for-ssh-optional"}},[t._v("#")]),t._v(" Setup Two Factor Authentication for SSH (optional)")]),t._v(" "),a("p",[t._v("SSH can be a great tool for connecting to remote Linux systems. What if you could add another layer of security. With "),a("code",[t._v("2FA")]),t._v(", you can create a another security layer and it can be implemented in several ways, for example it works well with Google Authenticator.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBhcHQgaW5zdGFsbCBsaWJwYW0tZ29vZ2xlLWF1dGhlbnRpY2F0b3IgLXkK"}}),t._v(" "),a("p",[t._v("To make SSH use the Google Authenticator PAM module, just edit the "),a("code",[t._v("/etc/pam.d/sshd")]),t._v(" file:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBuYW5vIC9ldGMvcGFtLmQvc3NoZAo="}}),t._v(" "),a("p",[t._v("Add this line:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"YXV0aCByZXF1aXJlZCBwYW1fZ29vZ2xlX2F1dGhlbnRpY2F0b3Iuc28K"}}),t._v(" "),a("p",[t._v("Now you need to restart the "),a("code",[t._v("sshd")]),t._v(" daemon using:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"c3VkbyBzeXN0ZW1jdGwgcmVzdGFydCBzc2hkLnNlcnZpY2UK"}}),t._v(" "),a("p",[t._v("Modify "),a("code",[t._v("/etc/ssh/sshd_config")])]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"c3VkbyBuYW5vIC9ldGMvc3NoL3NzaGRfY29uZmlnCg=="}}),t._v(" "),a("p",[t._v("Find")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("ChallengeResponseAuthentication")])]),t._v(" "),a("li",[a("code",[t._v("UsePAM")])])]),t._v(" "),a("p",[t._v("And update this attributtes with "),a("code",[t._v("yes")])]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"Q2hhbGxlbmdlUmVzcG9uc2VBdXRoZW50aWNhdGlvbiB5ZXMKClVzZVBBTSB5ZXMK"}}),t._v(" "),a("p",[t._v("Save the file and exit.")]),t._v(" "),a("p",[t._v("Execute "),a("code",[t._v("google-authenticator")]),t._v(" command.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"Z29vZ2xlLWF1dGhlbnRpY2F0b3IK"}}),t._v(" "),a("p",[t._v("It will ask you a series of questions, here is one of recommended configuration:")]),t._v(" "),a("ul",[a("li",[t._v('Make tokens ‚Äútime-base‚Äù": yes')]),t._v(" "),a("li",[t._v("Update the "),a("code",[t._v(".google_authenticator")]),t._v(" file: "),a("code",[t._v("yes")])]),t._v(" "),a("li",[t._v("Disallow multiple uses: "),a("code",[t._v("yes")])]),t._v(" "),a("li",[t._v("Increase the original generation time limit: "),a("code",[t._v("no")])]),t._v(" "),a("li",[t._v("Enable rate-limiting: "),a("code",[t._v("yes")])])]),t._v(" "),a("p",[t._v("If you see the QR code and don‚Äôt have your phone, it will lead you to a website that has your emergency scratch codes printed on a card. You can keep the card in a safe place, so you won't need to dig around for it during an emergency.")]),t._v(" "),a("p",[t._v("Now, open "),a("code",[t._v("Google Authenticator")]),t._v(" on your phone and add your secret key to make two factor authentication work.")]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",[t._v("If you are enabling 2FA on a remote machine that you access over SSH you need to follow "),a("strong",[t._v("steps 2 and 3")]),t._v(" of "),a("a",{attrs:{href:"https://www.digitalocean.com/community/tutorials/how-to-set-up-multi-factor-authentication-for-ssh-on-ubuntu-18-04",target:"_blank",rel:"noopener noreferrer"}},[t._v("this tutorial"),a("OutboundLink")],1),t._v(" to make 2FA work.")])]),t._v(" "),a("h2",{attrs:{id:"secure-shared-memory-optional"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#secure-shared-memory-optional"}},[t._v("#")]),t._v(" Secure Shared Memory (optional)")]),t._v(" "),a("p",[t._v("One of the first things you should do is secure the shared "),a("a",{attrs:{href:"https://www.lifewire.com/what-is-random-access-memory-ram-2618159",target:"_blank",rel:"noopener noreferrer"}},[t._v("memory"),a("OutboundLink")],1),t._v(" used on the system. If you're unaware, shared memory can be used in an attack against a running service. Because of this, secure that portion of system memory.")]),t._v(" "),a("p",[t._v("To learn more about secure shared memory, read this "),a("a",{attrs:{href:"https://www.techrepublic.com/article/how-to-enable-secure-shared-memory-on-ubuntu-server/",target:"_blank",rel:"noopener noreferrer"}},[t._v("techrepublic.com article"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"install-fail2ban-optional"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-fail2ban-optional"}},[t._v("#")]),t._v(" Install Fail2ban (optional)")]),t._v(" "),a("p",[t._v("Fail2ban is an intrusion prevention system that monitors log files and searches for particular patterns that correspond to failed login attempts. If a certain number of failed logins are detected from a specific IP address (within a specified amount of time), fail2ban blocks access from that IP address. Fail2ban works by automatically issuing the following actions against offending clients: iptables or ip6tables firewall rule, Fail2Ban action, efence iptables firewall rule, SSHGuard filter.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBhcHQtZ2V0IGluc3RhbGwgZmFpbDJiYW4gLXkK"}}),t._v(" "),a("p",[t._v("Then edit a config file that monitors SSH logins.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBuYW5vIC9ldGMvZmFpbDJiYW4vamFpbC5sb2NhbAo="}}),t._v(" "),a("p",[t._v("Add a following lines to the bottom of the file.")]),t._v(" "),a("p",[a("strong",[t._v("Whitelisting IP address tip")]),t._v(": The "),a("code",[t._v("ignoreip")]),t._v(" parameter accepts a list of IP addresses, IP ranges or DNS hosts that you can specify to be allowed to connect. This is where you want to specify your local machine, local IP range or local domain, separated by spaces.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"IyBFeGFtcGxlCmlnbm9yZWlwID0gMTkyLjE2OC4xLjAvMjQgMTI3LjAuMC4xLzggCg=="}}),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"W3NzaGRdCmVuYWJsZWQgPSB0cnVlCnBvcnQgPSAmbHQ7MjIgb3IgeW91ciByYW5kb20gcG9ydCBudW1iZXImZ3Q7CmZpbHRlciA9IHNzaGQKbG9ncGF0aCA9IC92YXIvbG9nL2F1dGgubG9nCm1heHJldHJ5ID0gMwojIHdoaXRlbGlzdGVkIElQIGFkZHJlc3NlcwppZ25vcmVpcCA9ICZsdDtsaXN0IG9mIHdoaXRlbGlzdGVkIElQIGFkZHJlc3MsIHlvdXIgbG9jYWwgZGFpbHkgbGFwdG9wL3BjJmd0Owo="}}),t._v(" "),a("p",[t._v("Don't forget to save file. Restart fail2ban to take effect.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"c3VkbyBzeXN0ZW1jdGwgcmVzdGFydCBmYWlsMmJhbgo="}}),t._v(" "),a("h2",{attrs:{id:"configure-your-firewall"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-your-firewall"}},[t._v("#")]),t._v(" Configure your Firewall")]),t._v(" "),a("h3",{attrs:{id:"what-is-a-firewall"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-is-a-firewall"}},[t._v("#")]),t._v(" What is a Firewall?")]),t._v(" "),a("p",[t._v("Firewall is a network security system that filters and controls the traffic on a predetermined set of rules. This is an intermediary system between the device and the internet.")]),t._v(" "),a("p",[t._v("There are a lot of ways to do this, but the easiest way I find is with iptables-persistent package. You can download the package from Ubuntu‚Äôs default repositories:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBhcHQtZ2V0IHVwZGF0ZQo="}}),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBhcHQtZ2V0IGluc3RhbGwgaXB0YWJsZXMtcGVyc2lzdGVudAo="}}),t._v(" "),a("p",[t._v("Once the installation is complete, you can save your configuration using the command:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBpbnZva2UtcmMuZCBpcHRhYmxlcy1wZXJzaXN0ZW50IHNhdmUK"}}),t._v(" "),a("h3",{attrs:{id:"simple-firewall-configuration-for-validator"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#simple-firewall-configuration-for-validator"}},[t._v("#")]),t._v(" Simple firewall configuration for "),a("strong",[t._v("validator")])]),t._v(" "),a("p",[t._v("After executing this command, we will create rules with allowed ports "),a("code",[t._v("22")]),t._v(" and "),a("code",[t._v("26656")]),t._v(", the rest of the ports will be denied on "),a("code",[t._v("INPUT")]),t._v(" chain:")]),t._v(" "),a("ul",[a("li",[t._v("Port 22 (or your custom port) TCP for SSH connection")]),t._v(" "),a("li",[t._v("Port 26656 tcp for p2p for incoming connections")]),t._v(" "),a("li",[t._v("Deny other "),a("code",[t._v("INPUT")]),t._v(" connections")])]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBpcHRhYmxlcyAtQSBJTlBVVCAtcCB0Y3AgLS1kcG9ydCAyMiAtaiBBQ0NFUFQgJmFtcDsmYW1wOyBcCnN1ZG8gaXB0YWJsZXMgLUEgSU5QVVQgLXAgdGNwIC0tZHBvcnQgMjY2NTYgLWogQUNDRVBUICZhbXA7JmFtcDsgXApzdWRvIGlwdGFibGVzIC1QIElOUFVUIERST1AK"}}),t._v(" "),a("p",[t._v("Now you can check the "),a("code",[t._v("iptable")]),t._v(" configuration using "),a("code",[t._v("-L")]),t._v(" flag.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBpcHRhYmxlcyAtTAo="}}),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("A more detailed description of used ports can be found below.")])]),t._v(" "),a("h3",{attrs:{id:"rule-for-ssh-connection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rule-for-ssh-connection"}},[t._v("#")]),t._v(" Rule for ssh connection")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("We want to keep our SSH port open from the 192.168.1.3. That is we only want to allow those packets coming from 192.168.1.3 and which wants to go to the port 22.")])]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",[t._v("If you don't have static IP address we don't recommend add to add this IP specific rule. For that case just allow SSH port (by default it use "),a("code",[t._v("22")]),t._v(")")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBpcHRhYmxlcyAtQSBJTlBVVCAtcCB0Y3AgLS1kcG9ydCAyMiAtaiBBQ0NFUFQK"}})],1),t._v(" "),a("p",[t._v("Execute the below command:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBpcHRhYmxlcyAtQSBJTlBVVCAtcyAxOTIuMTY4LjEuMyAtcCB0Y3AgLS1kcG9ydCAyMiAtaiBBQ0NFUFQK"}}),t._v(" "),a("p",[t._v("The above command says looks for the packets originating from the IP address 192.168.1.3, having a TCP protocol and who wants to deliver something at the port 22 of your node. If you find those packets then Accept them.")]),t._v(" "),a("p",[t._v("Now check the "),a("code",[t._v("iptable")]),t._v(" configuration using "),a("code",[t._v("-L")]),t._v(" flag.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBpcHRhYmxlcyAtTAo="}}),t._v(" "),a("p",[t._v("Therefore, any packet coming from 192.168.1.3 is first checked if it is going to the port 22 if it isn‚Äôt then it\nis run through the next rule in the chain. Else it is allowed to pass the firewall.")]),t._v(" "),a("h2",{attrs:{id:"limit-network-connections"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#limit-network-connections"}},[t._v("#")]),t._v(" Limit network connections")]),t._v(" "),a("p",[t._v("The key idea is to restrict all connections and allow only used ports for security reasons.")]),t._v(" "),a("p",[t._v("You can find used ports in your node config files and make your own firewall rules and based on your node setup:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"fi8uaGFxcWQvY29uZmlnL2FwcC50b21sCn4vLmhhcXFkL2NvbmZpZy9jb25maWcudG9tbAp+Ly5oYXFxZC9jb25maWcvY2xpZW50LnRvbWwK"}}),t._v(" "),a("p",[a("strong",[t._v("Here is the best practice of used services:")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("port")]),t._v(" "),a("th",[t._v("service")]),t._v(" "),a("th",[t._v("rpc node")]),t._v(" "),a("th",[t._v("validator")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("1317")]),t._v(" "),a("td",[t._v("API server")]),t._v(" "),a("td",[t._v("‚úÖ")]),t._v(" "),a("td",[t._v("‚ùå")])]),t._v(" "),a("tr",[a("td",[t._v("8080")]),t._v(" "),a("td",[t._v("Rosseta API")]),t._v(" "),a("td",[t._v("‚úÖ")]),t._v(" "),a("td",[t._v("‚ùå")])]),t._v(" "),a("tr",[a("td",[t._v("9090")]),t._v(" "),a("td",[t._v("gRPC server")]),t._v(" "),a("td",[t._v("‚úÖ")]),t._v(" "),a("td",[t._v("‚ùå")])]),t._v(" "),a("tr",[a("td",[t._v("1317")]),t._v(" "),a("td",[t._v("gRPC web")]),t._v(" "),a("td",[t._v("‚úÖ")]),t._v(" "),a("td",[t._v("‚ùå")])]),t._v(" "),a("tr",[a("td",[t._v("8545")]),t._v(" "),a("td",[t._v("EMV RPC HTTP")]),t._v(" "),a("td",[t._v("‚úÖ")]),t._v(" "),a("td",[t._v("‚ùå")])]),t._v(" "),a("tr",[a("td",[t._v("8546")]),t._v(" "),a("td",[t._v("EMV RPC WebSocket")]),t._v(" "),a("td",[t._v("‚úÖ")]),t._v(" "),a("td",[t._v("‚ùå")])]),t._v(" "),a("tr",[a("td",[t._v("26657")]),t._v(" "),a("td",[t._v("Tendermint RPC")]),t._v(" "),a("td",[t._v("‚úÖ")]),t._v(" "),a("td",[t._v("‚ùå")])]),t._v(" "),a("tr",[a("td",[t._v("26658")]),t._v(" "),a("td",[t._v("ABCI application")]),t._v(" "),a("td",[t._v("‚ùå")]),t._v(" "),a("td",[t._v("‚ùå")])]),t._v(" "),a("tr",[a("td",[t._v("6060")]),t._v(" "),a("td",[t._v("pprof (Go pkg)")]),t._v(" "),a("td",[t._v("‚ùå")]),t._v(" "),a("td",[t._v("‚ùå")])]),t._v(" "),a("tr",[a("td",[t._v("26656")]),t._v(" "),a("td",[t._v("p2p incoming connections")]),t._v(" "),a("td",[t._v("‚úÖ")]),t._v(" "),a("td",[t._v("‚úÖ")])]),t._v(" "),a("tr",[a("td",[t._v("26660")]),t._v(" "),a("td",[t._v("Prometheus")]),t._v(" "),a("td",[t._v("‚ùå")]),t._v(" "),a("td",[t._v("‚ùå")])])])]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",[t._v("For security reasons, you must block access to the listed ports in the table from the public network.")]),t._v(" "),a("p",[t._v("How to do it via "),a("RouterLink",{attrs:{to:"/guides/validators/security_best_practices.html#tcp-or-unix-socket-address-for-the-rpc-server-to-listen-on"}},[t._v("iptables")]),t._v(" or via "),a("RouterLink",{attrs:{to:"/guides/validators/security_best_practices.html#ufw-configuration-alternatively"}},[t._v("ufw")])],1)]),t._v(" "),a("p",[t._v("For example, you can check your config files for services used:")]),t._v(" "),a("p",[a("strong",[t._v("File")]),t._v(" "),a("code",[t._v("app.toml")])]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"yaml",base64:"IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgICAgICAgICAgICAgICAgICAgICAgICAgICBnUlBDIENvbmZpZ3VyYXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCltncnBjXQoKIyBFbmFibGUgZGVmaW5lcyBpZiB0aGUgZ1JQQyBzZXJ2ZXIgc2hvdWxkIGJlIGVuYWJsZWQuCmVuYWJsZSA9IGZhbHNlCg=="}}),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"yaml",base64:"IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgICAgICAgICAgICAgICAgICAgICAgICBnUlBDIFdlYiBDb25maWd1cmF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCltncnBjLXdlYl0KCiMgR1JQQ1dlYkVuYWJsZSBkZWZpbmVzIGlmIHRoZSBnUlBDLXdlYiBzaG91bGQgYmUgZW5hYmxlZC4KIyBOT1RFOiBnUlBDIG11c3QgYWxzbyBiZSBlbmFibGVkLCBvdGhlcndpc2UsIHRoaXMgY29uZmlndXJhdGlvbiBpcyBhIG5vLW9wLgplbmFibGUgPSBmYWxzZQo="}}),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"yaml",base64:"IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OIFJQQyBDb25maWd1cmF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCltqc29uLXJwY10KCiMgRW5hYmxlIGRlZmluZXMgaWYgdGhlIGdSUEMgc2VydmVyIHNob3VsZCBiZSBlbmFibGVkLgplbmFibGUgPSBmYWxzZQo="}}),t._v(" "),a("p",[t._v("As you can see there are a few list of services, and we can have limit access to them via creating some specific rules:")]),t._v(" "),a("p",[t._v("Here is an examples of port specific rules:")]),t._v(" "),a("h3",{attrs:{id:"tcp-or-unix-socket-address-for-the-rpc-server-to-listen-on"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tcp-or-unix-socket-address-for-the-rpc-server-to-listen-on"}},[t._v("#")]),t._v(" TCP or UNIX socket address for the RPC server to listen on")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBpcHRhYmxlcyAtQSBJTlBVVCAtcCB0Y3AgLS1kcG9ydCAyNjY1NyAtaiBEUk9QCg=="}}),t._v(" "),a("p",[a("strong",[t._v("TCP or UNIX socket address of the ABCI application,")]),t._v(" "),a("strong",[t._v("or the name of an ABCI application compiled in with the Tendermint binary")])]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBpcHRhYmxlcyAtQSBJTlBVVCAtcCB0Y3AgLS1kcG9ydCAyNjY1OCAtaiBEUk9QCg=="}}),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",[t._v("We don't recommend limiting connections to this "),a("code",[t._v("port")]),t._v(" (26656) because it is used in p2p communications between nodes.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"yaml",base64:"IyBBZGRyZXNzIHRvIGxpc3RlbiBmb3IgaW5jb21pbmcgY29ubmVjdGlvbnMKCmxhZGRyID0gJnF1b3Q7dGNwOi8vMC4wLjAuMDoyNjY1NiZxdW90Owo="}}),t._v(" "),a("p",[t._v("Removing all other traffic")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBpcHRhYmxlcyAtQSBJTlBVVCAtaiBEUk9QCg=="}}),t._v(" "),a("h3",{attrs:{id:"additional-info"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#additional-info"}},[t._v("#")]),t._v(" Additional info")]),t._v(" "),a("p",[t._v("You can find additional information and examples "),a("a",{attrs:{href:"https://www.hostinger.com/tutorials/iptables-tutorial",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),a("OutboundLink")],1)])],1),t._v(" "),a("h3",{attrs:{id:"ufw-configuration-alternatively"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ufw-configuration-alternatively"}},[t._v("#")]),t._v(" UFW configuration (alternatively)")]),t._v(" "),a("p",[t._v("The standard "),a("code",[t._v("UFW")]),t._v(" firewall can be used to control network access to your node.")]),t._v(" "),a("p",[t._v("With any new installation, ufw is disabled by default. Enable it with the following settings.")]),t._v(" "),a("ul",[a("li",[t._v("Port 22 (or your custom port) TCP for SSH connection")]),t._v(" "),a("li",[t._v("Port 26656 tcp for p2p for incoming connections (necessary)")])]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"IyBCeSBkZWZhdWx0LCBkZW55IGFsbCBpbmNvbWluZyBhbmQgb3V0Z29pbmcgdHJhZmZpYwpzdWRvIHVmdyBkZWZhdWx0IGRlbnkgaW5jb21pbmcKc3VkbyB1ZncgZGVmYXVsdCBhbGxvdyBvdXRnb2luZwojIEFsbG93IHNzaCBhY2Nlc3MKc3VkbyB1ZncgYWxsb3cgc3NoICMgcG9ydCAyMiBvciB5b3VyIGN1c3RvbSBzc2ggcG9ydCBudW1iZXIKIyBBbGxvdyBuZWNlc3NhcnkgcG9ydApzdWRvIHVmdyBhbGxvdyAyNjY1Ni90Y3AKCiMgRW5hYmxlIGZpcmV3YWxsCnN1ZG8gdWZ3IGVuYWJsZQo="}}),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"IyBWZXJpZnkgc3RhdHVzCnN1ZG8gdWZ3IHN0YXR1cyBudW1iZXJlZAo="}}),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",[t._v("Please don't exposed Grafana and Prometheus ports to the public internet. This introduces a new attack surface and would allow malicious attackers to access your data. You can built a secure solution with Wireguard, for example, and recommend you do so as well!")])]),t._v(" "),a("p",[t._v("If you are planning to use Grafana or (and) Prometheus don't forget to allow them too.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"IyBBbGxvdyBncmFmYW5hIHdlYiBzZXJ2ZXIgcG9ydApzdWRvIHVmdyBhbGxvdyAzMDAwL3RjcAojIEVuYWJsZSBwcm9tZXRoZXVzIGVuZHBvaW50IHBvcnQKc3VkbyB1ZncgYWxsb3cgMjY2NjAvdGNwCg=="}}),t._v(" "),a("p",[a("strong",[t._v("Optional but recommended")]),t._v(" Whitelisting (or permitting connections from a specific IP) can be setup via the following command.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c3VkbyB1ZncgYWxsb3cgZnJvbSAmbHQ7eW91ciBsb2NhbCBkYWlseSBsYXB0b3AvcGMmZ3Q7CiMgRXhhbXBsZQojIHN1ZG8gdWZ3IGFsbG93IGZyb20gMTkyLjE2OC41MC4yMgo="}}),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[a("strong",[t._v("Port Forwarding Tip:")]),t._v(" You'll need to forward and open ports to your validator. Verify if it's working via using this "),a("a",{attrs:{href:"https://www.yougetsignal.com/tools/open-ports/",target:"_blank",rel:"noopener noreferrer"}},[t._v("service"),a("OutboundLink")],1),t._v(" for example.")]),t._v(" "),a("p",[t._v("Or you can also use "),a("code",[t._v("netcat")]),t._v(" (or nc in short) is a powerful and easy-to-use utility that can be employed for just about anything in Linux in relation to TCP, UDP, or UNIX-domain sockets.")])]),t._v(" "),a("h2",{attrs:{id:"verify-listening-ports"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#verify-listening-ports"}},[t._v("#")]),t._v(" Verify Listening Ports")]),t._v(" "),a("p",[t._v("If you want to maintain a secure server, you should validate the listening network ports every once in a while. This will provide you essential information about your network.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c3VkbyBzcyAtdHVscG4K"}}),t._v(" "),a("p",[t._v("Alternatively you can also use "),a("code",[t._v("netstat")])]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c3VkbyBuZXRzdGF0IC10dWxwbgo="}}),t._v(" "),a("h2",{attrs:{id:"vpn-connection-optional"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vpn-connection-optional"}},[t._v("#")]),t._v(" VPN connection (optional)")]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",[t._v("Recommended for Advanced Users Only")])]),t._v(" "),a("p",[t._v("It is good practice to arrange access to your node using a vpn connection or a secure tunnel and at the same time restrict access to the node from the external network.")]),t._v(" "),a("p",[t._v("You will learn how to set up secure and encrypt network traffic between two machines using WireGuard, greatly minimizing the chance of your local host being attacked by intruders and minimizing the attack surface of a remote host without requiring you to open ports for services like Grafana.")]),t._v(" "),a("p",[t._v("So, for example we can use WireGuard for secure connect with node.")]),t._v(" "),a("h3",{attrs:{id:"install-wireguard"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-wireguard"}},[t._v("#")]),t._v(" Install WireGuard")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBhcHQgaW5zdGFsbCBsaW51eC1oZWFkZXJzLWdlbmVyaWMgJmFtcDsmYW1wOyBcCnN1ZG8gYWRkLWFwdC1yZXBvc2l0b3J5IHBwYTp3aXJlZ3VhcmQvd2lyZWd1YXJkIC15ICZhbXA7JmFtcDsgXApzdWRvIGFwdC1nZXQgdXBkYXRlICZhbXA7JmFtcDsgXApzdWRvIGFwdC1nZXQgaW5zdGFsbCB3aXJlZ3VhcmQgLXkK"}}),t._v(" "),a("h3",{attrs:{id:"setting-up-key-pairs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-key-pairs"}},[t._v("#")]),t._v(" Setting Up Key Pairs")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBzdQpjZCAvZXRjL3dpcmVndWFyZAp1bWFzayAwNzcKd2cgZ2Vua2V5IHwgdGVlIHdpcmVndWFyZC1wcml2YXRla2V5IHwgd2cgcHVia2V5ICZndDsgd2lyZWd1YXJkLXB1YmxpY2tleQo="}}),t._v(" "),a("p",[t._v("Create a wg0.conf configuration file in /etc/wireguard directory.\nUpdate your Private and Public Keys accordingly.\nChange the Endpoint to your remote node public IP or DNS address.")]),t._v(" "),a("p",[t._v("Local machine config")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"IyBsb2NhbCBub2RlIFdpcmVHdWFyZCBDb25maWd1cmF0aW9uCltJbnRlcmZhY2VdCiMgbG9jYWwgbm9kZSBhZGRyZXNzCkFkZHJlc3MgPSAxMC4wLjAuMS8zMgojIGxvY2FsIG5vZGUgcHJpdmF0ZSBrZXkKUHJpdmF0ZUtleSA9ICZsdDtpLmUuIFNKNnlnTTNjc2EzNi4uLitwTzRYVzFRVTBCMk09Jmd0OwojIGxvY2FsIG5vZGUgd2lyZWd1YXJkIGxpc3RlbmluZyBwb3J0Ckxpc3RlblBvcnQgPSA1MTgyMAoKIyByZW1vdGUgbm9kZQpbUGVlcl0KIyByZW1vdGUgbm9kZSdzIHB1YmxpY2tleQpQdWJsaWNLZXkgPSAmbHQ7aS5lLiBScTdRRWUyZzNxSWpEZnRNdS4uLmtuQkdTOW12SkRDYTRXUWc9Jmd0OwojIHJlbW90ZSBub2RlJ3MgcHVibGljIGlwIGFkZHJlc3Mgb3IgZG5zIGFkZHJlc3MKRW5kcG9pbnQgPSByZW1vdGVub2RlLm15ZG9tYWlubmFtZS5jb206NTE4MjAKIyByZW1vdGUgbm9kZSdzIGludGVyZmFjZSBhZGRyZXNzCkFsbG93ZWRJUHMgPSAxMC4wLjAuMi8zMgpQZXJzaXN0ZW50S2VlcGFsaXZlID0gMjEK"}}),t._v(" "),a("p",[t._v("Node side config")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"IyByZW1vdGUgbm9kZSBXaXJlR3VhcmQgQ29uZmlndXJhdGlvbgpbSW50ZXJmYWNlXQpBZGRyZXNzID0gMTAuMC4wLjIvMzIKUHJpdmF0ZUtleSA9ICZsdDtpLmUuIGNGM09qVmh0S0pBWS9yUS4uLkZpN0FTV2c9Jmd0OwpMaXN0ZW5Qb3J0ID0gNTE4MjAKCiMgbG9jYWwgbm9kZQpbUGVlcl0KIyBsb2NhbCBub2RlJ3MgcHVibGljIGtleQpQdWJsaWNLZXkgPSAmbHQ7aS5lLiByWkxCenNsdkZ0RUouLi5kZlg0WFN3az0mZ3Q7CiMgbG9jYWwgbm9kZSdzIHB1YmxpYyBpcCBhZGRyZXNzIG9yIGRucyBhZGRyZXNzCkVuZHBvaW50ID0gbG9jYWxub2Rlc0lQLW9yLWRvbWFpbi5jb206NTE4MjAKIyBsb2NhbCBub2RlJ3MgaW50ZXJmYWNlIGFkZHJlc3MKQWxsb3dlZElQcyA9IDEwLjAuMC4xLzMyClBlcnNpc3RlbnRLZWVwYWxpdmUgPSAyMQo="}}),t._v(" "),a("h3",{attrs:{id:"configure-firewall"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-firewall"}},[t._v("#")]),t._v(" Configure Firewall")]),t._v(" "),a("p",[t._v("Configure "),a("code",[t._v("UFW")]),t._v(" on both machines")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyB1ZncgYWxsb3cgNTE4MjAvdWRwCnN1ZG8gdWZ3IGFsbG93IGZyb20gMTAuMC4wLjAvMTYgdG8gYW55CiMgY2hlY2sgdGhlIGZpcmV3YWxsIHJ1bGVzCnN1ZG8gdWZ3IHZlcmJvc2UK"}}),t._v(" "),a("h3",{attrs:{id:"autostart"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#autostart"}},[t._v("#")]),t._v(" Autostart")]),t._v(" "),a("p",[t._v("Add WireGuard service to systemd")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBzeXN0ZW1jdGwgZW5hYmxlIHdnLXF1aWNrQHdnMC5zZXJ2aWNlCnN1ZG8gc3lzdGVtY3RsIGRhZW1vbi1yZWxvYWQK"}}),t._v(" "),a("h3",{attrs:{id:"start-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-service"}},[t._v("#")]),t._v(" Start service")]),t._v(" "),a("p",[t._v("Then you can start and check service")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBzeXN0ZW1jdGwgc3RhcnQgd2ctcXVpY2tAd2cwCg=="}}),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBzeXN0ZW1jdGwgc3RhdHVzIHdnLXF1aWNrQHdnMAo="}}),t._v(" "),a("p",[t._v("After that you can verify connect between machines")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyB3ZwoKIyMgRXhhbXBsZSBPdXRwdXQKIyBpbnRlcmZhY2U6IHdnMAojICBwdWJsaWMga2V5OiByWkxCenNsdkZ0RUouLi5kZlg0WFN3az0KIyAgcHJpdmF0ZSBrZXk6IChoaWRkZW4pCiMgIGxpc3RlbmluZyBwb3J0OiA1MTgyMAoKI3BlZXI6CiMgIGVuZHBvaW50OiAxMS4zNC41Ni4xODo1MTgyMAojICBhbGxvd2VkIGlwczogMTAuMC4wLjIvMzIKIyAgbGF0ZXN0IGhhbmRzaGFrZTogMTEgc2Vjb25kcyBhZ28KIyAgdHJhbnNmZXI6IDUwMCBLaUIgcmVjZWl2ZWQsIDkwMCBLaUIgc2VudAojICBwZXJzaXN0ZW50IGtlZXBhbGl2ZTogZXZlcnkgMjEgc2Vjb25kcwo="}}),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"cGluZyAxMC4wLjAuMgo="}}),t._v(" "),a("p",[t._v("To stop and disable WireGuard execute")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3VkbyBzeXN0ZW1jdGwgc3RvcCB3Zy1xdWlja0B3ZzAgJmFtcDsmYW1wOyBcCnN1ZG8gc3lzdGVtY3RsIGRpc2FibGUgd2ctcXVpY2tAd2cwLnNlcnZpY2UgJmFtcDsmYW1wOyBcCnN1ZG8gc3lzdGVtY3RsIGRhZW1vbi1yZWxvYWQK"}}),t._v(" "),a("p",[t._v("And of course you can also create your own firewall rules depending on the network and node configuration")]),t._v(" "),a("h2",{attrs:{id:"additional-best-practices"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#additional-best-practices"}},[t._v("#")]),t._v(" Additional best practices")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Networking")]),t._v(" "),a("td",[t._v("In order to use ufw and Fail2ban's whitelisting feature, you need to assign static internal IPs to your validator node and daily laptop/PC. This is useful in conjunction with ufw and Fail2ban's whitelisting feature.")])]),t._v(" "),a("tr",[a("td",[t._v("Power Outage")]),t._v(" "),a("td",[t._v("Make sure your nodes are backed up by turning on the Uninterruptible Power Supply (UPS), which will allow for power surges if there is a blackout.")])]),t._v(" "),a("tr",[a("td",[t._v("Clear the bash history")]),t._v(" "),a("td",[a("p",[t._v("When pressing the up-arrow key, you can see prior commands which may contain sensitive data. To clear this, run the following:")]),a("p",[a("code",[t._v("shred -u ~/.bash_history && touch ~/.bash_history")])])])])])]),t._v(" "),a("h2",{attrs:{id:"additional-information"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#additional-information"}},[t._v("#")]),t._v(" Additional information")]),t._v(" "),a("p",[t._v("You can find more information about firewall configuration here:")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://ubuntu.com/server/docs/security-firewall",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ubuntu security firewall"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://help.ubuntu.com/community/IptablesHowTo",target:"_blank",rel:"noopener noreferrer"}},[t._v("Iptables"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://opensource.com/article/18/9/linux-iptables-firewalld",target:"_blank",rel:"noopener noreferrer"}},[t._v("firewalld"),a("OutboundLink")],1)])])]),t._v(" "),a("h2",{attrs:{id:"key-security"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#key-security"}},[t._v("#")]),t._v(" Key security")]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("test")]),t._v(" backend is a password-less variation of the file backend. Keys are stored unencrypted on disk. This keyring is provided for testing purposes only. Use at your own risk!")]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",[t._v("üö® DANGER: Never create your mainnet validator keys using a test keying backend. Doing so might result in a loss of funds by making your funds remotely accessible via the "),a("code",[t._v("eth_sendTransaction")]),t._v(" JSON-RPC endpoint.")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.ethereum.org/2015/08/29/security-alert-insecurely-configured-geth-can-make-funds-remotely-accessible",target:"_blank",rel:"noopener noreferrer"}},[t._v("Security Advisory: Insecurely configured geth can make funds remotely accessible"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("We recommend using "),a("RouterLink",{attrs:{to:"/guides/kms/kms.html"}},[t._v("Tendermint KMS")]),t._v(" that allows separating key management from Tendermint nodes.\nIt is recommended that the KMS service runs in a separate physical hosts.")],1),t._v(" "),a("h2",{attrs:{id:"sentry-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sentry-node"}},[t._v("#")]),t._v(" Sentry Node")]),t._v(" "),a("p",[t._v("Validators are responsible for ensuring that the network can sustain denial of service attacks.")]),t._v(" "),a("p",[t._v("One recommended way to mitigate these risks is for validators to carefully structure their network topology in a so-called sentry node architecture.")]),t._v(" "),a("p",[t._v("More information about sentry node you can find "),a("RouterLink",{attrs:{to:"/guides/validators/security.html#sentry-nodes-ddos-protection"}},[t._v("here")])],1)],1)}),[],!1,null,null,null);e.default=s.exports}}]);